{% extends "layout.html" %}
{% block content %}
<div>
    <div class="flex_container profile_container">
        <div class="profile_photo"></div>
        <h2 class="margin">@{{ profile["username"] }}</h2 >
        <p class="bio">{{ profile["bio"] }}</p>
        {% if profile["username"] == session.username %}
            <a href="/edit_profile" class="button">Edit profile</a>
        {% else %}
            {% if partner == False %}
                <a onclick="openRequestForm(`{{ profile['username'] }}`)" class="button">Send request</a>
            {% else %}
            <a class="button" href="/open_chat?username={{ profile['username'] }}">Your chat</a>
            {% endif %}
        {% endif %}
    </div>

    <div class="flex_container profile_container">
        <p>Languages: {{ profile["languages"] }}</p>
        <p>Language levels: {{ profile["levels"] }}</p>
        <p>Color: {{ profile["color"] }}</p>
    </div>
</div>

<form action="/sent_request" method="POST" id="request_form" class="hidden"></form>
{% endblock %}

{% block scirpt %}
<script>
    function openRequestForm(username) {
        const requestContainer = document.getElementById('request_form');
        requestContainer.classList.add('request_form');
        requestContainer.innerHTML = 
            `<h2>Language partner request to ${username}</h2>
            <textarea type="text" name="message" placeholder="Write a message" form="request_form"></textarea>
            <a href="/profile?username={{ profile['username'] }}" class="button">Cancel</a>
            <input type="submit" value="Send request" class="button" form="request_form">`;
    }
</script>
{% endblock %}
