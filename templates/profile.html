{% extends "layout.html" %}
{% block content %}
<div class="flex_container">
    {% if profile["username"] == session.username %}
        <h2>This is your profile!</h2 >
        <a href="/edit_profile" class="button">Edit profile</a>
    {% else %}
        <h2>{{ profile["username"] }}'s profile</h2 >
        {% if partner == False %}
            <a onclick="openRequestForm(`{{ profile['username'] }}`)" class="button">Send request</a>
        {% else %}
            <p>You are language partners!</p>
        {% endif %}
    {% endif %}
    <ul>
        <li>Username: {{ profile["username"] }}</li>
        <li>Languages: {{ profile["languages"] }}</li>
        <li>Language levels: {{ profile["levels"] }}</li>
        <li>Bio: {{ profile["bio"] }}</li>
        <li>Color: {{ profile["color"] }}</li>
    </ul>
</div>

<form action="/sent_request" method="POST" id="request_form" class="hidden"></form>
{% endblock %}

{% block scirpt %}
<script>
    function openRequestForm(username) {
        const requestContainer = document.getElementById('request_form');
        requestContainer.classList.add('request_form');
        requestContainer.innerHTML = 
            `<h2>Language partner request to ${username}</h2>
            <textarea type="text" name="message" placeholder="Write a message" form="request_form"></textarea>
            <a href="/profile?username={{ profile['username'] }}" class="button">Cancel</a>
            <input type="submit" value="Send request" class="button" form="request_form">`;
    }
</script>
{% endblock %}
