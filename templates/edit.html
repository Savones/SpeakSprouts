{% extends "layout.html" %}
{% block content %}
<div class="flex_container">
    <h1>Edit profile here!</h1>
    <form method="POST" action="/profile?username={{ session.username }}" enctype="multipart/form-data">
        <h3>Choose profile picture</h3>
        <label for="file" class="btn button">Select image</label>
        <input type="file" style="visibility:hidden;" name="file" id="file">
        <h3>Bio</h2>
        <textarea type="text" name="bio">{{ profile["bio"] }}</textarea><br>
        <h3>Languages</h2>
        {% for language in profile["languages"] %}
        <div class="flex_display levels_container">
            <p>{{ language[2] }}</p>
            <div class="flex_display levels">
                {% for level in levels %}
                    {% if level == language[1] %}
                        <a class="button green">{{ language[1] }}</a>
                    {% else %}
                        <a href="/edit_profile?level={{level}}&id={{language[0]}}" class="button grey">{{ level }}</a>
                    {% endif %}
                {% endfor %}
            </div>
            <a href="/edit_profile?deleted={{ language[2] }}"><i class="fa fa-trash"></i></a>
        </div>
        {% endfor %}
        <button id="add_language" class="button" type="button">Add language</button>
        <div id="languages_selection" class="hidden">
            <div class="drop_down">
                {% for item in languages %}
                    <a href="/edit_profile?language={{ item[0] }}">{{ item[0] }}</a>
                {% endfor %}
            </div>
        </div>
        
        <input type="submit" value="Save" class="button">
    </form>
</div>
{% endblock %}

{% block script %}
<script>
    document.getElementById('add_language').addEventListener('click', function() {
        const languagesContainer = document.getElementById('languages_selection');
        languagesContainer.classList.toggle('languages_container');
    });
</script>
{% endblock %}
